<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Distribuição Circular</title>
    <style>
        canvas {
            display: block;
            margin: auto;
            background-color: #f0f0f0;
        }
    </style>
</head>

<body>
    <input type="file" id="file-input" accept=".txt" />
    <canvas id="main-canvas" width="500" height="500"></canvas>
    <script>
        const canvas = document.getElementById('main-canvas');
        const ctx = canvas.getContext('2d');

        function parseVertices(edges) {
            const vertices = new Set();

            edges.forEach(edge => {
                vertices.add(edge.v1);
                vertices.add(edge.v2);
            });

            return Array.from(vertices).map(vertex => ({ name: vertex, x: undefined, y: undefined }));
        }

        function getCoordinatesOfPoints(circle, vertices) {
            const { centerX, centerY, radius } = circle;
            const numOfPoints = vertices.length;

            vertices.forEach((vertex, index) => {
                const angle = (2 * Math.PI / numOfPoints) * index;
                vertex.x = centerX + radius * Math.cos(angle);
                vertex.y = centerY + radius * Math.sin(angle);
            });

            return vertices;
        }

        function drawCirclePoints(ctx, vertices, point) {
            vertices.forEach(({ x, y, name }) => {
                // Draw the point
                ctx.beginPath();
                ctx.arc(x, y, point.size, 0, 2 * Math.PI);
                ctx.fillStyle = point.color;
                ctx.fill();
                ctx.closePath();

                // Draw the name of the vertex
                ctx.font = '12px Arial';
                ctx.fillStyle = 'black';
                ctx.textAlign = 'center';
                ctx.fillText(name, x, y - 10); // Position text slightly above the circle
            });
        }

        function parseEdges(content) {
            const lines = content.split('\n').filter(line => line.trim() !== '');

            return lines.map(line => {
                const match = line.trim().match(/^(.+?)\s*-\s*(.+)$/);
                if (match) {
                    return { v1: match[1].trim(), v2: match[2].trim() };
                }
                return null;
            }).filter(edge => edge !== null);
        }

        function readFile(content) {
            const edges = parseEdges(content);
            console.log('Edges:', edges);

            const vertices = parseVertices(edges);
            console.log('Vertices:', vertices);

            const circle = { centerX: 250, centerY: 250, radius: 200 };
            const point = { size: 5, color: 'blue' };

            const coordinates = getCoordinatesOfPoints(circle, vertices);
            drawCirclePoints(ctx, coordinates, point);
        }

        document.getElementById('file-input').addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = () => readFile(reader.result);
            reader.readAsText(file);
        });
    </script>
</body>

</html>
